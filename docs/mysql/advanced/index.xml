<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>高级篇 on 常用中间件分析</title><link>https://zput.github.io/middleware/docs/mysql/advanced/</link><description>Recent content in 高级篇 on 常用中间件分析</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Sat, 26 Mar 2016 08:47:11 +0100</lastBuildDate><atom:link href="https://zput.github.io/middleware/docs/mysql/advanced/index.xml" rel="self" type="application/rss+xml"/><item><title>底层结构</title><link>https://zput.github.io/middleware/docs/mysql/advanced/page_lock_log/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zput.github.io/middleware/docs/mysql/advanced/page_lock_log/</guid><description>索引 # what: A database index is a data structure that improves the speed of operations in a table
索引分类： 单值索引：一个索引只包含单个列，一个表可以有多个单列索引。 唯一索引：索引列的值必须唯一，但是允许空值。 复合索引：一个索引包含多个字段。 why:
索引的优势和劣势 优势： 查找：类似大学图书馆的书目索引，提高数据检索的效率，降低数据库的IO成本。 排序：通过索引対数据进行排序，降低数据排序的成本，降低了CPU的消耗。 劣势： 实际上索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的。 虽然索引大大提高了查询速度，但是同时会降低表的更新速度，例如对表频繁的进行INSERT、UPDATE和DELETE。因为更新表的时候，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加的索引列的字段，都会调整因为更新所带来的键值变化后的索引信息。 索引只是提高效率的一个因素，如果MySQL有大数据量的表，就需要花时间研究建立最优秀的索引。 how:
重点：索引会影响到MySQL查找(WHERE的查询条件)和排序(ORDER BY)两大功能！ 什么时候需要建立索引： 主键:主键自动建立主键索引（唯一 + 非空）。 where/order by: 频繁作为查询条件的字段应该创建索引。 查询中统计或者分组字段（group by也和索引有关）。 查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度。 查询中与其他表关联的字段，外键关系建立索引。 索引分析 从9.1.单表索引分析&amp;ndash;&amp;gt;范围之后的索引会失效。 从9.2.两表索引分析&amp;mdash;&amp;gt;左连接将索引创建在右表上更合适。 10.1.索引失效的情况: 全值匹配我最爱。 最佳左前缀法则。 不在索引列上做任何操作（计算、函数、(自动or手动)类型转换），会导致索引失效而转向全表扫描。 索引中范围条件右边的字段会全部失效。 尽量使用覆盖索引（只访问索引的查询，索引列和查询列一致），减少SELECT *。 MySQL在使用!=或者&amp;lt;&amp;gt;的时候无法使用索引会导致全表扫描。 is null、is not null也无法使用索引。 like以通配符开头%abc索引失效会变成全表扫描。 字符串不加单引号索引失效。 少用or，用它来连接时会索引失效。 锁 # what: InnoDB锁: 共享锁（S）：允许一个事务去读一行，阻止其他事务获得相同数据集的排他锁。 排他锁（X）：允许获得排他锁的事务更新数据，阻止其他事务取得相同数据集的共享读锁和排他写锁。 为了允许行锁和表锁共存，实现多粒度锁机制，InnoDB 还有两种内部使用的意向锁（Intention Locks），这两种意向锁都是表锁：</description></item></channel></rss>